<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Opsirius Bundler Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="ambient"></div>
    <div class="shell">
      <div class="layout">
        <aside class="sidebar">
          <div class="brand">
            <img class="brand-logo" src="opsanctus.png" alt="Opsirius logo" />
          </div>
          <div class="platform-switch" role="tablist" aria-label="Platform switch">
            <button class="tab is-active" data-platform="bonkfun">Bonkfun</button>
            <button class="tab" data-platform="pumpfun">Pumpfun</button>
          </div>
          <nav class="nav">
            <a href="#overview" class="nav-link">Overview</a>
            <a href="#trade" class="nav-link">Trade</a>
            <a href="#bundle-existing" class="nav-link">Bundle</a>
            <a href="#actions" class="nav-link">Actions</a>
            <a href="#config" class="nav-link">Config</a>
            <a href="#wallets" class="nav-link">Wallets</a>
            <a href="#jobs" class="nav-link">Jobs</a>
          </nav>
          <div class="sidebar-status">
            <span class="status-dot" id="status-dot"></span>
            <span id="status-text">Ready</span>
          </div>
        </aside>

        <div class="main-area">
          <main class="content">
            <section class="card hero" id="overview" style="--delay: 0.05s">
          <div class="card-header">
            <div>
              <h2>Overview</h2>
              <p>Live snapshot of wallets, totals, and token status.</p>
            </div>
            <button class="ghost" id="baseline-btn">Record baseline</button>
          </div>
          <div class="metrics-grid">
            <div class="metric">
              <div class="metric-label">Main wallet</div>
              <div class="metric-value" id="metric-main-wallet">--</div>
              <div class="metric-sub" id="metric-main-balance">--</div>
            </div>
            <div class="metric">
              <div class="metric-label">Wallet count</div>
              <div class="metric-value" id="metric-wallet-count">0</div>
              <div class="metric-sub" id="metric-wallets-sol">--</div>
            </div>
            <div class="metric">
              <div class="metric-label">Total SOL</div>
              <div class="metric-value" id="metric-total-sol">--</div>
              <div class="metric-sub">Main + bundlers</div>
            </div>
            <div class="metric">
              <div class="metric-label">Token mint</div>
              <div class="metric-value" id="metric-mint">--</div>
              <div class="metric-sub" id="metric-token-holdings">--</div>
            </div>
            <div class="metric">
              <div class="metric-label">Token value (USD)</div>
              <div class="metric-value" id="metric-token-value">--</div>
              <div class="metric-sub" id="metric-token-price">--</div>
            </div>
            <div class="metric">
              <div class="metric-label">SOL delta</div>
              <div class="metric-value" id="metric-pl">--</div>
              <div class="metric-sub" id="metric-baseline">Baseline not set</div>
            </div>
          </div>
        </section>

        <section class="card trade" id="trade" style="--delay: 0.1s">
          <div class="card-header">
            <div>
              <h2>Trade</h2>
              <p>Buy or sell across all bundler wallets by percentage.</p>
            </div>
          </div>
          <div class="trade-controls">
            <div class="trade-row">
              <div class="trade-label">Buy</div>
              <div class="trade-buttons">
                <button class="action trade-btn" data-side="buy" data-percent="10">Buy 10%</button>
                <button class="action trade-btn" data-side="buy" data-percent="25">Buy 25%</button>
                <button class="action trade-btn" data-side="buy" data-percent="50">Buy 50%</button>
                <button class="action trade-btn" data-side="buy" data-percent="75">Buy 75%</button>
                <button class="action trade-btn" data-side="buy" data-percent="100">Buy 100%</button>
              </div>
            </div>
            <div class="trade-row">
              <div class="trade-label">Sell</div>
              <div class="trade-buttons">
                <button class="action trade-btn" data-side="sell" data-percent="10">Sell 10%</button>
                <button class="action trade-btn" data-side="sell" data-percent="25">Sell 25%</button>
                <button class="action trade-btn" data-side="sell" data-percent="50">Sell 50%</button>
                <button class="action trade-btn" data-side="sell" data-percent="75">Sell 75%</button>
                <button class="action trade-btn" data-side="sell" data-percent="100">Sell 100%</button>
              </div>
            </div>
            <div class="trade-row">
              <div class="trade-label">Dev sell</div>
              <div class="trade-buttons">
                <button class="action trade-btn" data-scope="dev" data-side="sell" data-percent="10">Dev 10%</button>
                <button class="action trade-btn" data-scope="dev" data-side="sell" data-percent="25">Dev 25%</button>
                <button class="action trade-btn" data-scope="dev" data-side="sell" data-percent="50">Dev 50%</button>
                <button class="action trade-btn" data-scope="dev" data-side="sell" data-percent="75">Dev 75%</button>
                <button class="action trade-btn" data-scope="dev" data-side="sell" data-percent="100">Dev 100%</button>
              </div>
            </div>
          </div>
          <div class="trade-footer">
            <label>
              Token mint (optional override)
              <input id="trade-mint" type="text" placeholder="Auto-filled from minted token" />
            </label>
            <div class="trade-result" id="trade-result">No trades yet.</div>
          </div>
          <div class="trade-auto">
            <label>
              Auto-sell dev at profit %
              <input id="auto-sell-percent" type="number" min="1" step="1" value="100" />
            </label>
            <div class="trade-auto-actions">
              <button class="action" id="auto-sell-start">Start auto-sell</button>
              <button class="action" id="auto-sell-stop">Stop</button>
            </div>
            <div class="trade-result" id="auto-sell-status">Auto-sell idle.</div>
          </div>
        </section>

        <section class="card bundle-existing" id="bundle-existing" style="--delay: 0.11s">
          <div class="card-header">
            <div>
              <h2>Bundle Existing Token</h2>
              <p>Bundle buys for an existing mint with your reused wallets.</p>
            </div>
            <button class="ghost" id="bundle-existing-run">Run bundle</button>
          </div>
          <div class="bundle-grid">
            <label>
              Token mint (CA)
              <input id="bundle-mint" type="text" placeholder="Mint address" />
            </label>
            <label>
              Token creator (optional)
              <input id="bundle-creator" type="text" placeholder="Creator address" />
            </label>
            <label>
              Total SOL to spend
              <input id="bundle-total-sol" type="number" step="0.0001" placeholder="1.0" />
            </label>
            <label>
              Wallet count (optional)
              <input id="bundle-wallet-count" type="number" step="1" placeholder="Use all" />
            </label>
            <label>
              Min SOL per wallet (optional)
              <input id="bundle-wallet-min-sol" type="number" step="0.0001" placeholder="0.05" />
            </label>
            <div class="trade-result" id="bundle-existing-result">No bundle started.</div>
          </div>
        </section>

        <section class="card actions" id="actions" style="--delay: 0.12s">
          <div class="card-header">
            <div>
              <h2>Actions</h2>
              <p>Run any bundler operation without touching the CLI.</p>
            </div>
            <button class="ghost" id="refresh-btn">Refresh</button>
          </div>
          <div class="actions-grid">
            <button class="action" data-action="deploy-only">Deploy only</button>
            <button class="action" data-action="start">Run bundle</button>
            <button class="action" data-action="single">Single wallet</button>
            <button class="action" data-action="close">Close LUT</button>
            <button class="action" data-action="gather">Gather funds</button>
            <button class="action" data-action="status">Status check</button>
            <button class="action" data-action="test" id="action-test">Run test</button>
          </div>
        </section>

        <section class="card config" id="config" style="--delay: 0.15s">
          <div class="card-header">
            <div>
              <h2>Token and Config</h2>
              <p>Update env variables and launch settings in one place.</p>
            </div>
            <button class="primary" id="save-config">Save config</button>
          </div>
          <form id="config-form">
            <div class="form-section">
              <h3>Network and Wallet</h3>
              <div class="form-grid">
                <label>
                  RPC endpoint
                  <input data-key="RPC_ENDPOINT" type="text" placeholder="https://..." />
                </label>
                <label>
                  WS endpoint
                  <input data-key="RPC_WEBSOCKET_ENDPOINT" type="text" placeholder="wss://..." />
                </label>
                <label>
                  Private key (base58)
                  <input data-key="PRIVATE_KEY" type="password" placeholder="Only set if changing" />
                </label>
                <label class="inline">
                  <input data-key="LIL_JIT_MODE" type="checkbox" />
                  Use Lil Jito mode
                </label>
                <label>
                  Lil Jito endpoint
                  <input data-key="LIL_JIT_ENDPOINT" type="text" placeholder="https://..." />
                </label>
                <label>
                  Lil Jito WS endpoint
                  <input data-key="LIL_JIT_WEBSOCKET_ENDPOINT" type="text" placeholder="wss://..." />
                </label>
              </div>
            </div>
            <div class="form-section">
              <h3>Token details</h3>
              <div class="form-grid">
                <label>
                  Token name
                  <input data-key="TOKEN_NAME" type="text" />
                </label>
                <label>
                  Token symbol
                  <input data-key="TOKEN_SYMBOL" type="text" />
                </label>
                <label>
                  Display name
                  <input data-key="TOKEN_SHOW_NAME" type="text" />
                </label>
                <label>
                  Create on
                  <input data-key="TOKEN_CREATE_ON" type="text" />
                </label>
                <label>
                  Description
                  <textarea data-key="DESCRIPTION" rows="3"></textarea>
                </label>
                <label>
                  Token logo path
                  <input data-key="FILE" id="logo-path" type="text" readonly />
                </label>
                <label>
                  Upload logo
                  <input id="logo-upload" type="file" accept="image/*" />
                </label>
                <div class="trade-result" id="logo-upload-status">No logo uploaded.</div>
                <label>
                  Twitter
                  <input data-key="TWITTER" type="text" />
                </label>
                <label>
                  Telegram
                  <input data-key="TELEGRAM" type="text" />
                </label>
                <label>
                  Website
                  <input data-key="WEBSITE" type="text" />
                </label>
                <label class="inline">
                  <input data-key="VANITY_MODE" type="checkbox" />
                  Enable vanity address
                </label>
              </div>
            </div>
            <div class="form-section">
              <h3>Bundling settings</h3>
              <div class="form-grid">
                <label>
                  Swap amount (SOL)
                  <input data-key="SWAP_AMOUNT" type="number" step="0.0001" />
                </label>
                <label>
                  Wallet count
                  <input data-key="DISTRIBUTION_WALLETNUM" type="number" step="1" />
                </label>
                <label>
                  Jito fee (SOL)
                  <input data-key="JITO_FEE" type="number" step="0.0001" />
                </label>
                <label>
                  Buyer wallet (optional)
                  <input data-key="BUYER_WALLET" type="text" />
                </label>
                <label>
                  Buyer amount (optional)
                  <input data-key="BUYER_AMOUNT" type="number" step="0.0001" />
                </label>
              </div>
            </div>
            <div class="form-section">
              <h3>Wallet reuse</h3>
              <div class="form-grid">
                <label class="inline">
                  <input data-key="SKIP_DISTRIBUTION" type="checkbox" />
                  Skip SOL distribution
                </label>
                <label class="inline">
                  <input data-key="REUSE_WALLETS" type="checkbox" />
                  Reuse existing wallets
                </label>
                <label>
                  Min SOL per wallet
                  <input data-key="WALLET_MIN_SOL" type="number" step="0.0001" />
                </label>
                <label>
                  Underfunded mode (skip/fail)
                  <input data-key="UNDERFUNDED_MODE" type="text" />
                </label>
                <label>
                  Wallet limit
                  <input data-key="WALLET_LIMIT" type="number" step="1" />
                </label>
                <label>
                  Keys directory
                  <input data-key="KEYS_DIR" type="text" />
                </label>
              </div>
            </div>
          </form>
        </section>

        <section class="card wallets" id="wallets" style="--delay: 0.2s">
          <div class="card-header">
            <div>
              <h2>Wallets</h2>
              <p>Bundler wallets generated for this platform.</p>
            </div>
            <div class="tag" id="wallet-tag">0 wallets</div>
          </div>
          <div class="wallets-table" id="wallets-table">
            <div class="wallet-row header">
              <div>#</div>
              <div>Public key</div>
              <div>SOL</div>
              <div>Copy</div>
            </div>
          </div>
        </section>

        <section class="card jobs" id="jobs" style="--delay: 0.25s">
          <div class="card-header">
            <div>
              <h2>Jobs and Logs</h2>
              <p>Track every action executed through the dashboard.</p>
            </div>
            <button class="ghost" id="jobs-refresh">Refresh jobs</button>
          </div>
          <div class="jobs-grid">
            <div class="jobs-list" id="jobs-list"></div>
            <div class="log-panel">
              <div class="log-header">
                <div id="log-title">Select a job</div>
                <button class="ghost small" id="log-stop">Stop job</button>
              </div>
              <pre id="log-output">No log selected.</pre>
            </div>
          </div>
        </section>
          </main>
        </div>
      </div>
    </div>

    <script src="app.js" defer></script>
  </body>
</html>
